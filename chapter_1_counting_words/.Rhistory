# 1) Make sure tinytex is present
if (!requireNamespace("tinytex", quietly = TRUE)) install.packages("tinytex")
# 2) Update TeX Live and install the font + lua font db tools
tinytex::tlmgr_update()
tinytex::tlmgr_install(c(
"lm",            # Latin Modern
"lmodern",       # compatibility wrapper
"luaotfload",    # lua fontloader (provides luaotfload-tool)
"fontspec",      # required for Xe/LuaLaTeX font selection
"unicode-math"   # often pulled in by templates
))
# 3) Rebuild the LuaTeX font database
# (no harm if it was already fine)
system("luaotfload-tool -u")
install.packages("tinytex")

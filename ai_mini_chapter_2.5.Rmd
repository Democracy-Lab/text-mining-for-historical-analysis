---
title: "ai_mini_chapter_2.5"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



Working through the process of writing your own code step-by-step provides insight into the underlying concepts and processes behind working with text as data. Understanding the premise behind syntax, functions, and how they tie back to data processing enables us to actualize our analytic goals. With this knowledge of data processing we can begin to use AI chatbots in a meaningful and critical away. Here, we iterate on our analyses by practicing with the AI chatbot, ChatGPT. In future chapters we will engage different AI chatbots, like open source ones. 

This chapter has demonstrated how to perform exploratory data analysis, a process through which we construct a high-level overview of the corpus, engage in iterative refinement, and draw upon preliminary findings to inform more focused, in-depth investigations. We can also use AI chatbots in this process by facilitating brainstorming and supporting iterative analysis through the automation of tasks. For instance, in this chapter we removed stop words (e.g., "the" or "and") from our dataset, which significantly improved the clarity of our results. We can also use ChatGPT to generate additional stop words, specifically attuned to the linguistic characteristics of 19th-century Hansard.

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=Analyst Prompt]
Act like an R Programmer and generate a list of stopwords to be removed for an analysis of the 19th-century Hansard corpus.
\end{tcolorbox}

\begin{tcolorbox}[colback=green!5!white, colframe=green!75!black, title=ChatGPT-4o Response]
\begin{verbatim}
custom_stopwords <- c("lord", "lords", "hon", "mr", "sir", "gentleman", "gentlemen",
                      "speaker", "right", "honourable", "house", "parliament", 
                      "minister", "bill", "member", "question", "motion", "committee", 
                      "government", "debate", "order", "division", "clause")
\end{verbatim}
\end{tcolorbox}

Before removing the stop words, we can think critically about whether or not the generated results align with our own analytic goals. We may, for example, want to keep the word "government" if we wanted to analyze this word's collocates. 

Throughout this book we will explore multiple different ways we can use AI chatbots to the benefit of our workflows. For example, we can also use it during brainstorming to help us decide which keywords we may want to analyze. 

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=User Prompt]
I want to text mine and analyze heated topics from within the 1850 Hansard Parliamentary debates. Suggest several keywords that might be interesting.
\end{tcolorbox}

\begin{tcolorbox}[colback=green!5!white, colframe=green!75!black, title=ChatGPT-4o Response]
When analyzing the 1850 Hansard Parliamentary debates for heated topics, you'll want to focus on issues that were contentious or widely discussed at the time. Here are some keyword suggestions:

\textbf{Corn Laws} – Although the Corn Laws were repealed in 1846, the economic and social impacts continued to be a hot topic of debate.

\textbf{Irish Famine} – The Great Irish Famine (1845–1852) was a significant issue, particularly regarding the British government's response.

\textbf{Chartism} – Though the Chartist movement had declined by 1850, discussions about labor rights, suffrage, and political reform were still prevalent.

\textbf{Poor Law} – The administration and reform of the Poor Laws were highly debated, particularly in relation to poverty and public welfare.

\textbf{Colonial Governance} – Issues around the governance and management of British colonies, particularly in places like India and Ireland.

\textbf{Free Trade} – Discussions around free trade policies, especially in the aftermath of the Corn Laws repeal.

\textbf{Slavery} – Although the British Empire abolished slavery in 1833, discussions about slavery and the slave trade (particularly in relation to other nations) continued.

\textbf{Catholic Emancipation} – Ongoing debates about the rights of Catholics in Britain and Ireland.

\textbf{Industrialization} – Issues related to the rapid industrialization of Britain, including worker rights, factory conditions, and urbanization.

\textbf{Public Health} – Particularly in the context of the cholera outbreaks and the general health of the urban poor.
 
These keywords should help you identify debates that were particularly heated or significant during that time. You can further refine your analysis by focusing on specific phrases or related terms within these broader topics.
\end{tcolorbox}

This response provides us with an overview of other critical, interrelated topics. Treating these debate topics as keywords can lead to additional, meaningful analyses. To demonstrate this, we will use the code introduced previously in the chapter to identify the context for the word "Irish" 

```{r, warning=FALSE, message=FALSE}
irish_context <- hansard_1850 %>% 
  filter(str_detect(text, "\\bIrish\\b")) %>%
  unnest_tokens(word, text) %>%
  anti_join(stop_words) %>%
  filter(!str_detect(word, "[:digit:]")) %>%
  count(word) %>%
  arrange(desc(n))
```

```{r, warning=FALSE, message=FALSE}
top_irish <- irish_context  %>%
  top_n(20)

ggplot(data = top_irish) +
  geom_col(aes(x = reorder(word, n), 
               y = n),
           fill = "steel blue") +
  coord_flip() +
  labs(title = "Top Words Occuring in Sentences Mentioning Irish",
       subtitle = "From the 1850 Hansard debates",
       x = "Word",
       y = "Count") 
```

In this chapter, we used computational historical thinking as a method for examining change over time. We integrated historical theory, code, and artificial intelligence (AI) in a hybrid method of analysis. This method is co-creative: it brings attention to how data processing techniques shape historical analysis, while also recognizing that interpretive insights can lead us to revise our computational approach. In doing so, it emphasizes the dynamic interplay between computation and historical interpretation.

In the chapters that follow, we will build on this foundation by introducing more advanced techniques. We will also critically examine how AI is used in historical research. A key question we will explore is whether current AI chatbots can generate meaningful historical interpretations of 19th-century Parliamentary debates.

While AI offers powerful tools for exploratory analysis, we will also examine the limitations of using AI chatbots as an approach to computational text analysis, including the conditions under which they may produce inaccurate or misleading interpretations of history. 





## Practicing with AI 

Throughout this book, we emphasize the importance of an iterative approach to analysis. During this iterative process we can refine one's own understanding of the data by revisiting the original records, or by questioning one's assumptions of historical interpretation through interrogative processes that build upon one-another. 

AI chatbots can support iterative research, too, by supporting an interactive bnrainstorming process. Analysts can ask questions, review responses, and adjust their queries, engaging in a cycle of exploration and refinement. When used this way, an AI chatbot is guided by the analyst to generate focused, relevant responses. The analyst must also critique the chatbot’s output to ensure it is accurate and useful. This approach allows analysts to use AI chatbots as a tool for inquiry while maintaining control over the research process.

In the following example, we use our queries from earlier in the chapter to guide an AI chatbot in helping us to brainstorm additional events that we might want to explore. Specifically, we ask the chatbot to generate additional events that might be of interest to someone studying language relating to war in the 1860 Hansard debates. We will guide the chatbot's response by giving it an example of the types of events that interest us taken from the `eventslist` dataset.

The template we provide the chatbot (e.g. "return your answer in this fomrat...") instructs it to return its response in the specified format. 

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=Analyst Prompt] I am providing you with a list of events followed by their year. The purpose of this list is to analyze key events that were mentioned in the 1860 Hansard debates. Name some different events that might be relevant based on the list I provide you. Don't mention the same as provided by the list. Also provide a reason for why the events are relevant. 

Return your answer in this format:

\textbf{Event:} \\
\textbf{Reason:}

These are the events from the list: (copy/paste contents of eventslist) \end{tcolorbox}

\begin{tcolorbox}[colback=green!5!white, colframe=green!75!black, title=ChatGPT-4o Response]

\textbf{Event: Abolition of the Slave Trade (1807)} \\
\textbf{Reason:} The abolition of the slave trade would be highly relevant in discussions about moral and economic reforms during the 1860 Hansard debates, particularly in the context of human rights and British colonial policies.

\textbf{Event: Reform Act (1832)} \\ 
\textbf{Reason:} This act, which expanded suffrage and restructured parliamentary representation, would likely influence discussions on electoral reform and representation in 1860.

\textbf{Event: Crimean War (1853–1856)} \\ 
\textbf{Reason:} The Crimean War had significant impacts on British foreign policy, military reforms, and public health improvements, all of which could be relevant topics of debate in 1860.

\textbf{Event: Irish Potato Famine (1845–1852)} \\ 
\textbf{Reason:} The famine’s aftermath would remain a pressing issue, influencing debates about Irish governance, economic policies, and relief efforts.

\textbf{Event: Great Exhibition (1851)} \\ 
\textbf{Reason:} As a symbol of industrial progress and imperial power, the Great Exhibition could be discussed in terms of economic innovation and Britain's global role in the mid-19th century.

\textbf{Event: Indian Rebellion (1857)} \\
\textbf{Reason:} The rebellion was a turning point in British imperial governance, leading to significant debates about military strategy, colonial administration, and the justification of imperial rule.

\textbf{Event: Public Health Act (1848)} \\ 
\textbf{Reason:} This act, which addressed urban sanitation and public health, would be relevant to discussions about improving living conditions and public health policies in 1860.

\textbf{Event: Establishment of the Penny Post (1840)} \\ 
\textbf{Reason:} The reform in postal services, increasing communication efficiency and accessibility, could relate to debates on economic and infrastructural development.

\end{tcolorbox}

Our initial prompt to the AI chatbot successfully guided it to identify and return events similar to the query. However, when we provided the chatbot with the entire contents of eventslist, the results lacked precision and specificity. This outcome suggests that more targeted guidance is necessary to focus on the specific characteristics of interest. To tailor the results to a specific research question, we will refine the prompt further by narrowing in on the events we are most interested in from `eventslist` and instructing the chatbot to return like-events, in this case, other names of meetings that occurred in the 1860s. 

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=Analyst Prompt]
I am providing you with a list of events followed by their year. The purpose of this list is to analyze key events that were mentioned in the 1860 Hansard debates. Name some different events that might be relevant based on the list I provide you. Don't mention the same as provided by the list. Also provide a reason for why the events are relevant based on the list I provide. 

Return your answer like this:

\textbf{Event:} \\
\textbf{Date:} \\
\textbf{Reason:}

These are the events from the list: "greek war", "napoleonic wars."
\end{tcolorbox}

\begin{tcolorbox}[colback=green!5!white, colframe=green!75!black, title=ChatGPT-4o Response]
Here are some different events that might be relevant based on your list:

\textbf{Event: Chartist Movements} \\
\textbf{AI Assigned Date:} 1838–1850\\
\textbf{Reason:} The Chartist movements, with their organized public gatherings for political reform, directly relate to the mentioned events like "public meeting" and "recent meeting," illustrating how assemblies have historically been used to drive societal change.

\textbf{Event: Anti-Corn Law League Meetings}\\
\textbf{AI Assigned Date:} 1839–1846\\
\textbf{Reason:} These meetings share a thematic connection to "public meeting" by demonstrating how public gatherings have been pivotal in shaping discourse around economic reform, similar to those discussed in the 1860 debates.

\textbf{Event: Hyde Park Demonstrations}\\
\textbf{AI Assigned Date:} 1855–1860\\
\textbf{Reason:} Hyde Park demonstrations resonate with "public meeting" and "recent meeting," showing how such gatherings functioned as platforms for political and social advocacy, reflecting the period's reliance on public discourse for progress.

\textbf{Event: Meetings on the Reform Act of 1832}\\
\textbf{AI Assigned Date:} 1831–1832\\
\textbf{Reason:} These meetings are akin to "yorkshire meeting" and "clontarf meeting," showcasing historical instances where regional or national public assemblies catalyzed significant legislative reforms, serving as a possible reference point in 1860.

\textbf{Event: Fenian Meetings}\\
\textbf{AI Assigned Date:} 1858–1860\\
\textbf{Reason:} While slightly later, Fenian meetings parallel "clontarf meeting" by highlighting Irish political concerns and illustrating how public gatherings were used to address issues of representation and governance.
\end{tcolorbox}

Now that we have a more specific list of events that aligns with our interests, we can use them in our analysis. To use our new events, we will create a data frame for them. We can prompt the chatbot to return the needed code. Given that we are very familiar with creating data frames at this point, we can also proof the chatbot's results and ensure they match our desired output. 

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=Analyst Prompt]
Return this text as a data frame in R with two columns: a column for the event, named event\_name and a column for the date, named AI Assigned Date. Write the events in lower case. 
\end{tcolorbox}

\begin{tcolorbox}[colback=green!5!white, colframe=green!75!black, title=ChatGPT-4o Response]
Here is the R code to create the requested data frame:
  
\begin{verbatim}
# Create the data frame

events_df <- data.frame(
  event_name = c(
    "crimean war",
    "russo-turkish war",
    "congress of vienna",
    "siege of acre",
    "battle of navarino",
    "schleswig-holstein wars"
  ),
  AI_Assigned_Date = c(
    "1853–1856",
    "1828–1829",
    "1814–1815",
    "1799",
    "1827",
    "1848–1852"
  )
)

# Print the data frame
print(events_data)
\end{verbatim}

This will create a data frame in R with two columns: event\_name (containing the event names in lowercase) and AI Assigned Date.
\end{tcolorbox}

We can now test the chatbot's responses by running the code. 

```{r}
# Create the data frame
events_df <- data.frame(
  event_name = c(
    "crimean war",
    "russo-turkish war",
    "congress of vienna",
    "siege of acre",
    "battle of navarino",
    "schleswig-holstein wars"
  ),
  AI_Assigned_Date = c(
    "1853–1856",
    "1828–1829",
    "1814–1815",
    "1799",
    "1827",
    "1848–1852"
  )
)

# Print the data frame
print(events_df)

```


```{r}
data("hansard_1860")
data("debate_metadata_1860")

hansard_1860 <- hansard_1860 %>% 
  left_join(debate_metadata_1860)
```

The following code filters the `hansard_1860` dataset to include rows where the `text` column matches any event name in `events_df$event_name`, using case-insensitive matching. It then adds a new column, `matched_event`, which contains the specific matched event name from the `text`. The result is a filtered data frame with an additional column identifying the matched event for each row.

```{r}
# Match with each event and 
# add a column to capture the matched event
new_matched_events <- hansard_1860 %>%
  filter(str_detect(text,
                    regex(paste0("\\b(", paste(events_df$event_name, collapse = "|"), ")\\b"), 
                          ignore_case = TRUE))) %>%
  mutate(matched_event = str_extract(text,
                                     regex(paste0("\\b(", paste(events_df$event_name, collapse = "|"), ")\\b"), 
                                           ignore_case = TRUE)))
```

```{r, results='asis', warning=FALSE, message=FALSE, echo=FALSE}
# Show top 5 rows
df_head <- new_matched_events %>% 
  slice_head(n = 5)

# Print table with fixed position and word wrap
kbl(df_head, format = "latex", 
    booktabs = TRUE, 
    linesep = "",
    caption = "Excerpt from Hansard 1850") %>%
  kable_styling(latex_options = c("scale_down", "repeat_header"),
                table.envir = FALSE) %>%
  column_spec(which(colnames(df_head) == "text"), 
              latex_column_spec = "p{12cm}", 
              latex_valign = "top")
```

The results show that not all of the events were mentioned word-for-word in the Hansard corpus; however, we successfully matched several, including the Crimean War, Congress of Vienna, and Battle of Navarino. While an AI chatbot can suggest a wider range of related terms to search for--and these terms might spark our curiosity--those terms may not actually appear in the corpus. For experts 19th-century history, it might be expected that some phrases would not be found, but for others, this process can offer a useful way to explore which events were and were not mentioned in the data. This kind of exploration is part of an ongoing, iterative process—where analysts refine their searches by adding or adjusting keywords, either manually or with AI. 

It is also important to note that the AI chatbot did not automatically fix formatting issues in the text, such as inconsistent capitalization. To obtain more reliable and visually meaningful results, the analyst may want to take extra processing steps to clean the data—such as making all text lowercase and fixing other formatting problems—before analysis.

```{r}
event_counts <- new_matched_events %>%
  count(matched_event, name = "count") %>%
  arrange(desc(count))

print(event_counts)
```


